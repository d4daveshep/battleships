============================= test session starts ==============================
platform linux -- Python 3.13.3, pytest-8.4.2, pluggy-1.6.0 -- /home/david/dev/battleships/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/david/dev/battleships
configfile: pyproject.toml
plugins: anyio-4.10.0, xdist-3.8.0, bdd-8.1.0, cov-7.0.0, asyncio-1.1.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 9 items

tests/bdd/test_gameplay_steps_browser.py::test_refreshing_page_maintains_game_state FAILED [ 11%]
tests/bdd/test_gameplay_steps_browser.py::test_reconnecting_to_an_inprogress_game FAILED [ 22%]
tests/bdd/test_gameplay_steps_browser.py::test_first_round_of_the_game FAILED [ 33%]
tests/bdd/test_gameplay_steps_browser.py::test_multiple_hits_on_same_ship_in_one_round FAILED [ 44%]
tests/bdd/test_gameplay_steps_browser.py::test_hitting_multiple_different_ships_in_one_round FAILED [ 55%]
tests/bdd/test_gameplay_steps_browser.py::test_handling_network_error_during_shot_submission FAILED [ 66%]
tests/bdd/test_gameplay_steps_browser.py::test_opponent_disconnects_during_game FAILED [ 77%]
tests/bdd/test_gameplay_steps_browser.py::test_opponent_reconnects_after_disconnection FAILED [ 88%]
tests/bdd/test_gameplay_steps_browser.py::test_player_surrenders_the_game FAILED [100%]

=================================== FAILURES ===================================
__________________ test_refreshing_page_maintains_game_state ___________________

fixturefunc = <function should_see_text_displayed at 0x734f09dac2c0>
request = <FixtureRequest for <Function test_refreshing_page_maintains_game_state>>
kwargs = {'page': <Page url='http://localhost:8000/game/umrUb3cT5eLLZ-TDMxeFCQ'>, 'text': 'Round 5'}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

page = <Page url='http://localhost:8000/game/umrUb3cT5eLLZ-TDMxeFCQ'>
text = 'Round 5'

    @then(parsers.parse('I should see "{text}" displayed'))
    def should_see_text_displayed(page: Page, text: str) -> None:
        """Verify text is displayed on the page"""
>       expect(page.locator(f'text="{text}"')).to_be_visible()
E       AssertionError: Locator expected to be visible
E       Actual value: <element(s) not found> 
E       Call log:
E         - Expect "to_be_visible" with timeout 5000ms
E         - waiting for locator("text=\"Round 5\"")

tests/bdd/test_gameplay_steps_browser.py:1412: AssertionError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:45172 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:45174 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
---------------------------- Captured stderr setup -----------------------------
INFO:     Started server process [2664956]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:45176 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:45176 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:45176 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:45176 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:45176 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:45176 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:45202 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:45192 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:45198 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:45198 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:45192 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /ready-for-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /ready-for-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:45192 - "GET /game/umrUb3cT5eLLZ-TDMxeFCQ HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "GET /game/umrUb3cT5eLLZ-TDMxeFCQ/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /place-ships/opponent-status/long-poll?version=1 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:45198 - "GET /game/umrUb3cT5eLLZ-TDMxeFCQ HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "GET /game/umrUb3cT5eLLZ-TDMxeFCQ/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45198 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/fire-shots HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Called
DEBUG opponent_fires_their_shots: Counter text: '0 / 6 available'
DEBUG opponent_fires_their_shots: current_shots=0, total_available=6
INFO:     127.0.0.1:45192 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:45192 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/aim-shot HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Fire button visible=True, enabled=True
DEBUG opponent_fires_their_shots: Clicking fire button
DEBUG: Player awnaAVx47hdtg8zVnTndyw shots_received: {'J1': 1, 'J2': 1, 'J3': 1, 'J4': 1, 'J5': 1, 'J6': 1}
INFO:     127.0.0.1:45192 - "POST /game/umrUb3cT5eLLZ-TDMxeFCQ/fire-shots HTTP/1.1" 200 OK
DEBUG: Player OOGQ3EMRj73Ru8Ap5_FY6Q shots_received: {'J1': 1, 'J2': 1, 'J3': 1, 'J4': 1, 'J5': 1, 'J6': 1}
INFO:     127.0.0.1:45198 - "GET /game/umrUb3cT5eLLZ-TDMxeFCQ/long-poll?version=0 HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Fired shots
INFO:     127.0.0.1:42182 - "GET /game/umrUb3cT5eLLZ-TDMxeFCQ/aiming-interface?clear_round=true HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Called
DEBUG opponent_fires_their_shots: Called
DEBUG opponent_fires_their_shots: Called
INFO:     127.0.0.1:46772 - "GET /game/umrUb3cT5eLLZ-TDMxeFCQ HTTP/1.1" 200 OK
INFO:     127.0.0.1:46772 - "GET /game/umrUb3cT5eLLZ-TDMxeFCQ/aiming-interface HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:46784 - "POST /test/reset-lobby HTTP/1.1" 200 OK
___________________ test_reconnecting_to_an_inprogress_game ____________________

fixturefunc = <function both_players_completed_ship_placement at 0x734f09d85760>
request = <FixtureRequest for <Function test_reconnecting_to_an_inprogress_game>>
kwargs = {'browser': <Browser type=<BrowserType name=chromium executable_path=/home/david/.cache/ms-playwright/chromium-1187/chrome-linux/chrome> version=140.0.7339.16>, 'game_context': {}}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/bdd/test_gameplay_steps_browser.py:547: in both_players_completed_ship_placement
    player_page, opponent_page, game_id = setup_two_player_game_browser(browser)
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/bdd/test_gameplay_steps_browser.py:105: in setup_two_player_game_browser
    player_page.wait_for_selector(
.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py:8182: in wait_for_selector
    self._sync(
.venv/lib/python3.13/site-packages/playwright/_impl/_page.py:423: in wait_for_selector
    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:369: in wait_for_selector
    await self._channel.send(
.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:69: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x734f08f44b90>
cb = <function Channel.send.<locals>.<lambda> at 0x734f08ce54e0>
is_internal = False, title = None

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", None
        ) or inspect.stack(0)
    
        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 10000ms exceeded.
E           Call log:
E             - waiting for locator("[data-testid=\"select-opponent-Player2\"]") to be visible

.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:558: TimeoutError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:46788 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:46790 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:46790 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:46790 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:46790 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:46790 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:46794 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:46794 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:46794 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:46790 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46794 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:46794 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:46810 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:46812 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:46816 - "GET /lobby HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:46820 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:46832 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38738 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38748 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38756 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38760 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38764 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38778 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38786 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38800 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38802 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38808 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38820 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38822 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38824 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38826 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38828 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38834 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38844 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38846 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38862 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38864 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38870 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38886 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38892 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38906 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38918 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38922 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38932 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38944 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38948 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38956 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38962 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38974 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38978 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38982 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38994 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38996 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39002 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39016 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39018 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39030 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39044 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39048 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39056 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39072 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39088 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39100 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39102 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39114 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39120 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39128 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39138 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39150 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39160 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39170 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39176 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39182 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39186 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39190 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39192 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39206 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39212 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39220 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39232 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39242 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39250 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39258 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39272 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39286 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39300 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39314 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39324 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39340 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39342 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39356 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39366 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39370 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39376 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39386 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39392 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39394 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39404 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39410 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39414 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39418 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39428 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39444 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39458 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39468 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39478 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39488 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39490 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39504 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39520 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39534 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39544 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39560 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39562 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39568 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39570 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39576 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39588 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39594 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39608 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39616 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43394 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43408 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43410 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43418 - "POST /test/reset-lobby HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:43424 - "POST /test/reset-lobby HTTP/1.1" 200 OK
_________________________ test_first_round_of_the_game _________________________

fixturefunc = <function both_players_completed_ship_placement at 0x734f09d85760>
request = <FixtureRequest for <Function test_first_round_of_the_game>>
kwargs = {'browser': <Browser type=<BrowserType name=chromium executable_path=/home/david/.cache/ms-playwright/chromium-1187/chrome-linux/chrome> version=140.0.7339.16>, 'game_context': {}}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/bdd/test_gameplay_steps_browser.py:547: in both_players_completed_ship_placement
    player_page, opponent_page, game_id = setup_two_player_game_browser(browser)
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/bdd/test_gameplay_steps_browser.py:154: in setup_two_player_game_browser
    ).click()
      ^^^^^^^
.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py:15543: in click
    self._sync(
.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py:160: in click
    return await self._frame.click(self._selector, strict=True, **params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:549: in click
    await self._channel.send("click", self._timeout, locals_to_params(locals()))
.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:69: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x734f08f47c50>
cb = <function Channel.send.<locals>.<lambda> at 0x734f09068e00>
is_internal = False, title = None

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", None
        ) or inspect.stack(0)
    
        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Locator.click: Timeout 40000ms exceeded.
E           Call log:
E             - waiting for locator("label:has([data-testid=\"select-ship-destroyer\"])")

.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:558: TimeoutError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:43430 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:43440 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:43440 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:43440 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:43440 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43440 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:43440 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:43466 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:43444 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:43452 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:43452 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:43444 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:43480 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43488 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43490 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43452 - "POST /place-ship HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:43502 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43512 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43522 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43526 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43528 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43444 - "POST /place-ship HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:43540 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43544 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43546 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43554 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43570 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43574 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43578 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43588 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43602 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43606 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43608 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43618 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43624 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43640 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43656 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43668 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43672 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43682 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43698 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43706 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43712 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43728 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43732 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43740 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43748 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43752 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43764 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43778 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43786 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43800 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43806 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43808 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43810 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43816 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43832 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43840 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43852 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43858 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43868 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43878 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43892 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43894 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43902 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43916 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43920 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43924 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43934 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43944 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43952 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43960 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43976 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43986 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43988 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:43992 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44004 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44012 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44026 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44030 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44044 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44048 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44058 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44060 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44072 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44088 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44098 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44106 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44120 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44128 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44130 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44142 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44144 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44154 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44164 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44174 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44176 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44178 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44194 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44206 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44208 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44214 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:44226 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57404 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57418 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57434 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57436 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57448 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57464 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57478 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57494 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57508 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57516 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57524 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57540 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57548 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57558 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57562 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57568 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57572 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57584 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57596 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57600 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57606 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57618 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57620 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57622 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57628 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57636 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57644 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57658 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57664 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57672 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57678 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57682 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57690 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57700 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57706 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57710 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57718 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57720 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57736 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57738 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57744 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57746 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57762 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57772 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57774 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57782 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57798 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57806 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57808 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57824 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57832 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57844 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57852 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57860 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57876 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57878 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57890 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57902 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57904 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57914 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57926 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57930 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57938 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57940 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57946 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57962 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57972 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:57986 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58000 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58012 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58028 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58034 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58048 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58050 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58060 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58070 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58080 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58082 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58084 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58094 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58102 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58114 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58118 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58126 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58130 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58144 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58158 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58170 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58184 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58188 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58200 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58202 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58216 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58228 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58242 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58246 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58248 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58256 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58272 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58288 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58296 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58306 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58320 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58328 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58332 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58340 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58342 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58358 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58374 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58376 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58378 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58390 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58396 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:58406 - "POST /test/reset-lobby HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:55098 - "POST /test/reset-lobby HTTP/1.1" 200 OK
_________________ test_multiple_hits_on_same_ship_in_one_round _________________

fixturefunc = <function when_round_ends_trigger at 0x734f09db5440>
request = <FixtureRequest for <Function test_multiple_hits_on_same_ship_in_one_round>>
kwargs = {'game_context': {'current_round': 2, 'game_id': 'Z3E6XNdgaW6jLAmvwi5d5g', 'opponent_page': <Page url='http://localhos.../localhost:8000/game/Z3E6XNdgaW6jLAmvwi5d5g'>}, 'page': <Page url='http://localhost:8000/game/Z3E6XNdgaW6jLAmvwi5d5g'>}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/bdd/test_gameplay_steps_browser.py:2060: in when_round_ends_trigger
    page.wait_for_selector('[data-testid="round-results"]', timeout=10000)
.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py:8182: in wait_for_selector
    self._sync(
.venv/lib/python3.13/site-packages/playwright/_impl/_page.py:423: in wait_for_selector
    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:369: in wait_for_selector
    await self._channel.send(
.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:69: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x734f08f1be10>
cb = <function Channel.send.<locals>.<lambda> at 0x734f08cae340>
is_internal = False, title = None

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", None
        ) or inspect.stack(0)
    
        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 10000ms exceeded.
E           Call log:
E             - waiting for locator("[data-testid=\"round-results\"]") to be visible

.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:558: TimeoutError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:55114 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:55122 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:55122 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:55122 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:55122 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:55122 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:55122 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:55162 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:55134 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:55146 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:55146 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:55134 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /ready-for-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /ready-for-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:55134 - "GET /game/Z3E6XNdgaW6jLAmvwi5d5g HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "GET /game/Z3E6XNdgaW6jLAmvwi5d5g/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /place-ships/opponent-status/long-poll?version=4 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:55146 - "GET /game/Z3E6XNdgaW6jLAmvwi5d5g HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "GET /game/Z3E6XNdgaW6jLAmvwi5d5g/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55146 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/fire-shots HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Called
DEBUG opponent_fires_their_shots: Counter text: '0 / 6 available'
DEBUG opponent_fires_their_shots: current_shots=0, total_available=6
INFO:     127.0.0.1:55134 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:55134 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Fire button visible=True, enabled=True
DEBUG opponent_fires_their_shots: Clicking fire button
DEBUG: Player Pi6ixC6N4GT-FW9braQS-Q shots_received: {'A1': 1, 'J1': 1, 'J2': 1, 'J3': 1, 'J4': 1, 'J5': 1}
INFO:     127.0.0.1:55134 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/fire-shots HTTP/1.1" 200 OK
DEBUG: Player qbgnk3jbugRsaKsE9oEUcA shots_received: {'J1': 1, 'J2': 1, 'J3': 1, 'J4': 1, 'J5': 1, 'J6': 1}
INFO:     127.0.0.1:55146 - "GET /game/Z3E6XNdgaW6jLAmvwi5d5g/long-poll?version=0 HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Fired shots
INFO:     127.0.0.1:38434 - "GET /game/Z3E6XNdgaW6jLAmvwi5d5g/aiming-interface?clear_round=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:38434 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:38434 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:38434 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
DEBUG: when_round_ends_trigger called
DEBUG: I2 not aimed, aiming now
INFO:     127.0.0.1:38434 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
DEBUG: Counter is visible, player hasn't fired yet. Counter: 
            
                4
            
            /
            6
            available
        
INFO:     127.0.0.1:38434 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:38434 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:38434 - "POST /game/Z3E6XNdgaW6jLAmvwi5d5g/fire-shots HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Called
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:53400 - "POST /test/reset-lobby HTTP/1.1" 200 OK
______________ test_hitting_multiple_different_ships_in_one_round ______________

fixturefunc = <function should_see_text_in_round_results at 0x734f09dac4a0>
request = <FixtureRequest for <Function test_hitting_multiple_different_ships_in_one_round>>
kwargs = {'page': <Page url='http://localhost:8000/game/lwO-ph8Els2XflJQTMrycw'>, 'text': 'Carrier: 2 hits'}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

page = <Page url='http://localhost:8000/game/lwO-ph8Els2XflJQTMrycw'>
text = 'Carrier: 2 hits'

    @then(parsers.parse('I should see "{text}" in the round results'))
    def should_see_text_in_round_results(page: Page, text: str) -> None:
        """Verify text is displayed in the round results"""
        # Wait for round results to be visible
        round_results = page.locator('[data-testid="round-results"]')
        expect(round_results).to_be_visible()
    
        # Check that the text appears in the round results
>       expect(round_results.locator(f'text="{text}"')).to_be_visible()
E       AssertionError: Locator expected to be visible
E       Actual value: <element(s) not found> 
E       Call log:
E         - Expect "to_be_visible" with timeout 5000ms
E         - waiting for locator("[data-testid=\"round-results\"]").locator("text=\"Carrier: 2 hits\"")

tests/bdd/test_gameplay_steps_browser.py:1423: AssertionError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:53416 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:53426 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53426 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:53426 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53426 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53426 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:53436 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53436 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:53436 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53426 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53436 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53436 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:53452 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:53436 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53436 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53436 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:53436 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53444 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53444 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:53444 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:53462 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /ready-for-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /ready-for-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:53462 - "GET /game/lwO-ph8Els2XflJQTMrycw HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "GET /game/lwO-ph8Els2XflJQTMrycw/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /place-ships/opponent-status/long-poll?version=7 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53444 - "GET /game/lwO-ph8Els2XflJQTMrycw HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "GET /game/lwO-ph8Els2XflJQTMrycw/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53444 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
DEBUG: when_round_ends_trigger called
DEBUG: I2 not aimed, aiming now
DEBUG: Opponent I2 not aimed, aiming now
INFO:     127.0.0.1:53462 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
DEBUG: Counter is visible, player hasn't fired yet. Counter: 
            
                6
            
            /
            6
            available
        
INFO:     127.0.0.1:53444 - "POST /game/lwO-ph8Els2XflJQTMrycw/fire-shots HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Called
DEBUG opponent_fires_their_shots: Counter text: '1 / 6 available'
DEBUG opponent_fires_their_shots: current_shots=1, total_available=6
INFO:     127.0.0.1:53462 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53462 - "POST /game/lwO-ph8Els2XflJQTMrycw/aim-shot HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Fire button visible=True, enabled=True
DEBUG opponent_fires_their_shots: Clicking fire button
DEBUG: Player 65fdyqpCZO18tHwSe_1MYw shots_received: {'A1': 1, 'C1': 1, 'E1': 1, 'G1': 1, 'I1': 1, 'J1': 1}
INFO:     127.0.0.1:53462 - "POST /game/lwO-ph8Els2XflJQTMrycw/fire-shots HTTP/1.1" 200 OK
DEBUG: Player VWFcZNTD6ggdzT9lOSweCQ shots_received: {'I2': 1, 'J1': 1, 'J2': 1, 'J3': 1, 'J4': 1, 'J5': 1}
INFO:     127.0.0.1:53444 - "GET /game/lwO-ph8Els2XflJQTMrycw/long-poll?version=0 HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Fired shots
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:52742 - "POST /test/reset-lobby HTTP/1.1" 200 OK
______________ test_handling_network_error_during_shot_submission ______________

E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Then "I should still be in the aiming phase". Line 623 in scenario "Handling network error during shot submission" in the feature "/home/david/dev/battleships/features/two_player_gameplay.feature"
All traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:52758 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:52760 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:52760 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:52760 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52760 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52760 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52760 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:52790 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52764 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52778 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:52778 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:52764 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /ready-for-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "POST /ready-for-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:52764 - "GET /game/XCiZmcb5pH1yUTiCwYa5Tw HTTP/1.1" 200 OK
INFO:     127.0.0.1:52764 - "GET /game/XCiZmcb5pH1yUTiCwYa5Tw/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /place-ships/opponent-status/long-poll?version=10 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52778 - "GET /game/XCiZmcb5pH1yUTiCwYa5Tw HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "GET /game/XCiZmcb5pH1yUTiCwYa5Tw/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /game/XCiZmcb5pH1yUTiCwYa5Tw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /game/XCiZmcb5pH1yUTiCwYa5Tw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /game/XCiZmcb5pH1yUTiCwYa5Tw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /game/XCiZmcb5pH1yUTiCwYa5Tw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /game/XCiZmcb5pH1yUTiCwYa5Tw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /game/XCiZmcb5pH1yUTiCwYa5Tw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52778 - "POST /game/XCiZmcb5pH1yUTiCwYa5Tw/fire-shots HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:53484 - "POST /test/reset-lobby HTTP/1.1" 200 OK
____________________ test_opponent_disconnects_during_game _____________________

fixturefunc = <function should_see_message at 0x734f09da6160>
request = <FixtureRequest for <Function test_opponent_disconnects_during_game>>
kwargs = {'message': 'Opponent has disconnected', 'page': <Page url='http://localhost:8000/game/zh06Wd44UbEU4gjdRESOCQ'>}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

page = <Page url='http://localhost:8000/game/zh06Wd44UbEU4gjdRESOCQ'>
message = 'Opponent has disconnected'

    @then(parsers.parse('I should see a message "{message}"'))
    def should_see_message(page: Page, message: str) -> None:
        """Verify message is displayed"""
>       expect(page.locator(f'text="{message}"')).to_be_visible()
E       AssertionError: Locator expected to be visible
E       Actual value: <element(s) not found> 
E       Call log:
E         - Expect "to_be_visible" with timeout 5000ms
E         - waiting for locator("text=\"Opponent has disconnected\"")

tests/bdd/test_gameplay_steps_browser.py:1239: AssertionError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:53492 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:53504 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53504 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:53504 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53504 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53504 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:53514 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53514 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:53514 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53504 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53514 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53514 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:53532 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:53514 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53514 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53514 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53516 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53514 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:53516 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:53534 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /ready-for-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "POST /ready-for-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:53534 - "GET /game/zh06Wd44UbEU4gjdRESOCQ HTTP/1.1" 200 OK
INFO:     127.0.0.1:53534 - "GET /game/zh06Wd44UbEU4gjdRESOCQ/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /place-ships/opponent-status/long-poll?version=13 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:53516 - "GET /game/zh06Wd44UbEU4gjdRESOCQ HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /game/zh06Wd44UbEU4gjdRESOCQ/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /game/zh06Wd44UbEU4gjdRESOCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /game/zh06Wd44UbEU4gjdRESOCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /game/zh06Wd44UbEU4gjdRESOCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /game/zh06Wd44UbEU4gjdRESOCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /game/zh06Wd44UbEU4gjdRESOCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /game/zh06Wd44UbEU4gjdRESOCQ/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "POST /game/zh06Wd44UbEU4gjdRESOCQ/fire-shots HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:50624 - "POST /test/reset-lobby HTTP/1.1" 200 OK
_________________ test_opponent_reconnects_after_disconnection _________________

fixturefunc = <function should_see_message at 0x734f09da6160>
request = <FixtureRequest for <Function test_opponent_reconnects_after_disconnection>>
kwargs = {'message': 'Opponent has reconnected', 'page': <Page url='http://localhost:8000/game/J55OO1NzcIkJVvVhLkkAZA'>}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

page = <Page url='http://localhost:8000/game/J55OO1NzcIkJVvVhLkkAZA'>
message = 'Opponent has reconnected'

    @then(parsers.parse('I should see a message "{message}"'))
    def should_see_message(page: Page, message: str) -> None:
        """Verify message is displayed"""
>       expect(page.locator(f'text="{message}"')).to_be_visible()
E       AssertionError: Locator expected to be visible
E       Actual value: <element(s) not found> 
E       Call log:
E         - Expect "to_be_visible" with timeout 5000ms
E         - waiting for locator("text=\"Opponent has reconnected\"")

tests/bdd/test_gameplay_steps_browser.py:1239: AssertionError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:50640 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:50644 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50644 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:50644 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50644 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:50644 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:50652 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50652 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:50652 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50644 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50652 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:50652 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:50672 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:50652 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50652 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50652 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:50652 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50660 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50660 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:50660 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:50684 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /ready-for-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "POST /ready-for-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:50684 - "GET /game/J55OO1NzcIkJVvVhLkkAZA HTTP/1.1" 200 OK
INFO:     127.0.0.1:50684 - "GET /game/J55OO1NzcIkJVvVhLkkAZA/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /place-ships/opponent-status/long-poll?version=16 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50660 - "GET /game/J55OO1NzcIkJVvVhLkkAZA HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "GET /game/J55OO1NzcIkJVvVhLkkAZA/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:50660 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/fire-shots HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Called
DEBUG opponent_fires_their_shots: Counter text: '0 / 6 available'
DEBUG opponent_fires_their_shots: current_shots=0, total_available=6
INFO:     127.0.0.1:52592 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52592 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52592 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52592 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52592 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:52592 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/aim-shot HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Fire button visible=True, enabled=True
DEBUG opponent_fires_their_shots: Clicking fire button
DEBUG: Player Ey6q59cghWX_TEJof83bhA shots_received: {'J1': 1, 'J2': 1, 'J3': 1, 'J4': 1, 'J5': 1, 'J6': 1}
INFO:     127.0.0.1:52592 - "POST /game/J55OO1NzcIkJVvVhLkkAZA/fire-shots HTTP/1.1" 200 OK
DEBUG: Player V9wzi6ahrLrkEkaB3MWpLA shots_received: {'J1': 1, 'J2': 1, 'J3': 1, 'J4': 1, 'J5': 1, 'J6': 1}
INFO:     127.0.0.1:50660 - "GET /game/J55OO1NzcIkJVvVhLkkAZA/long-poll?version=0 HTTP/1.1" 200 OK
DEBUG opponent_fires_their_shots: Fired shots
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:52796 - "POST /test/reset-lobby HTTP/1.1" 200 OK
_______________________ test_player_surrenders_the_game ________________________

fixturefunc = <function click_surrender_button at 0x734f09dfcf40>
request = <FixtureRequest for <Function test_player_surrenders_the_game>>
kwargs = {'page': <Page url='http://localhost:8000/game/_HgRSoyUiWrssN7CF0QA_A'>}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/bdd/test_gameplay_steps_browser.py:4004: in click_surrender_button
    surrender_btn.click()
.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py:15543: in click
    self._sync(
.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py:160: in click
    return await self._frame.click(self._selector, strict=True, **params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:549: in click
    await self._channel.send("click", self._timeout, locals_to_params(locals()))
.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:69: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x734f08ed5850>
cb = <function Channel.send.<locals>.<lambda> at 0x734f03b6ad40>
is_internal = False, title = None

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", None
        ) or inspect.stack(0)
    
        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Locator.click: Timeout 40000ms exceeded.
E           Call log:
E             - waiting for locator("button:has-text(\"Surrender\")")
E               - locator resolved to <button disabled class="btn btn-warning">                 Surrender (Coming Soon)     </button>
E             - attempting click action
E               2  waiting for element to be visible, enabled and stable
E                 - element is not enabled
E               - retrying click action
E               - waiting 20ms
E               2  waiting for element to be visible, enabled and stable
E                 - element is not enabled
E               - retrying click action
E                 - waiting 100ms
E               75  waiting for element to be visible, enabled and stable
E                  - element is not enabled
E                - retrying click action
E                  - waiting 500ms

.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:558: TimeoutError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:52808 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:52810 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:52810 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:52810 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52810 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52810 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52810 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:52822 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52818 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52820 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:52820 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:52818 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "POST /ready-for-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /ready-for-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:52818 - "GET /game/_HgRSoyUiWrssN7CF0QA_A HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "GET /game/_HgRSoyUiWrssN7CF0QA_A/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /place-ships/opponent-status/long-poll?version=19 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52820 - "GET /game/_HgRSoyUiWrssN7CF0QA_A HTTP/1.1" 200 OK
INFO:     127.0.0.1:52820 - "GET /game/_HgRSoyUiWrssN7CF0QA_A/aiming-interface HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:43242 - "POST /test/reset-lobby HTTP/1.1" 200 OK
--------------------------- Captured stderr teardown ---------------------------
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [2664956]
=========================== short test summary info ============================
FAILED tests/bdd/test_gameplay_steps_browser.py::test_refreshing_page_maintains_game_state
FAILED tests/bdd/test_gameplay_steps_browser.py::test_reconnecting_to_an_inprogress_game
FAILED tests/bdd/test_gameplay_steps_browser.py::test_first_round_of_the_game
FAILED tests/bdd/test_gameplay_steps_browser.py::test_multiple_hits_on_same_ship_in_one_round
FAILED tests/bdd/test_gameplay_steps_browser.py::test_hitting_multiple_different_ships_in_one_round
FAILED tests/bdd/test_gameplay_steps_browser.py::test_handling_network_error_during_shot_submission
FAILED tests/bdd/test_gameplay_steps_browser.py::test_opponent_disconnects_during_game
FAILED tests/bdd/test_gameplay_steps_browser.py::test_opponent_reconnects_after_disconnection
FAILED tests/bdd/test_gameplay_steps_browser.py::test_player_surrenders_the_game
======================== 9 failed in 259.76s (0:04:19) =========================
