============================= test session starts ==============================
platform linux -- Python 3.13.3, pytest-8.4.2, pluggy-1.6.0 -- /home/david/dev/battleships/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/david/dev/battleships
configfile: pyproject.toml
plugins: anyio-4.10.0, xdist-3.8.0, bdd-8.1.0, cov-7.0.0, asyncio-1.1.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 9 items

tests/bdd/test_gameplay_steps_browser.py::test_refreshing_page_maintains_game_state PASSED [ 11%]
tests/bdd/test_gameplay_steps_browser.py::test_reconnecting_to_an_inprogress_game PASSED [ 22%]
tests/bdd/test_gameplay_steps_browser.py::test_first_round_of_the_game PASSED [ 33%]
tests/bdd/test_gameplay_steps_browser.py::test_multiple_hits_on_same_ship_in_one_round PASSED [ 44%]
tests/bdd/test_gameplay_steps_browser.py::test_hitting_multiple_different_ships_in_one_round PASSED [ 55%]
tests/bdd/test_gameplay_steps_browser.py::test_handling_network_error_during_shot_submission FAILED [ 66%]
tests/bdd/test_gameplay_steps_browser.py::test_opponent_disconnects_during_game FAILED [ 77%]
tests/bdd/test_gameplay_steps_browser.py::test_opponent_reconnects_after_disconnection FAILED [ 88%]
tests/bdd/test_gameplay_steps_browser.py::test_player_surrenders_the_game FAILED [100%]

=================================== FAILURES ===================================
______________ test_handling_network_error_during_shot_submission ______________

E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Then "I should still be in the aiming phase". Line 623 in scenario "Handling network error during shot submission" in the feature "/home/david/dev/battleships/features/two_player_gameplay.feature"
All traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:35788 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:35802 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:35802 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:35802 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:35802 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:35802 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:35802 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:35822 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:35812 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:35816 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:35816 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:35812 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /ready-for-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "POST /ready-for-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:35812 - "GET /game/Kwej2b49sSD2nwn3PFjUzw HTTP/1.1" 200 OK
INFO:     127.0.0.1:35812 - "GET /game/Kwej2b49sSD2nwn3PFjUzw/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /place-ships/opponent-status/long-poll?version=16 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:35816 - "GET /game/Kwej2b49sSD2nwn3PFjUzw HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /game/Kwej2b49sSD2nwn3PFjUzw/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /game/Kwej2b49sSD2nwn3PFjUzw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /game/Kwej2b49sSD2nwn3PFjUzw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /game/Kwej2b49sSD2nwn3PFjUzw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /game/Kwej2b49sSD2nwn3PFjUzw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /game/Kwej2b49sSD2nwn3PFjUzw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /game/Kwej2b49sSD2nwn3PFjUzw/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "POST /game/Kwej2b49sSD2nwn3PFjUzw/fire-shots HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:47940 - "POST /test/reset-lobby HTTP/1.1" 200 OK
____________________ test_opponent_disconnects_during_game _____________________

fixturefunc = <function should_see_message at 0x7fbaba7aa340>
request = <FixtureRequest for <Function test_opponent_disconnects_during_game>>
kwargs = {'message': 'Opponent has disconnected', 'page': <Page url='http://localhost:8000/game/wgawHog7Yc1xLdRojCjA0w'>}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

page = <Page url='http://localhost:8000/game/wgawHog7Yc1xLdRojCjA0w'>
message = 'Opponent has disconnected'

    @then(parsers.parse('I should see a message "{message}"'))
    def should_see_message(page: Page, message: str) -> None:
        """Verify message is displayed"""
>       expect(page.locator(f'text="{message}"')).to_be_visible()
E       AssertionError: Locator expected to be visible
E       Actual value: <element(s) not found> 
E       Call log:
E         - Expect "to_be_visible" with timeout 5000ms
E         - waiting for locator("text=\"Opponent has disconnected\"")

tests/bdd/test_gameplay_steps_browser.py:1239: AssertionError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:47952 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:47962 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:47962 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:47962 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:47962 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:47962 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:47962 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:39942 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:47966 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:47974 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:47974 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:47966 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /place-ship HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /ready-for-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /ready-for-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:47966 - "GET /game/wgawHog7Yc1xLdRojCjA0w HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /game/wgawHog7Yc1xLdRojCjA0w/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /place-ships/opponent-status/long-poll?version=19 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:47974 - "GET /game/wgawHog7Yc1xLdRojCjA0w HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "GET /game/wgawHog7Yc1xLdRojCjA0w/aiming-interface HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /game/wgawHog7Yc1xLdRojCjA0w/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /game/wgawHog7Yc1xLdRojCjA0w/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /game/wgawHog7Yc1xLdRojCjA0w/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /game/wgawHog7Yc1xLdRojCjA0w/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /game/wgawHog7Yc1xLdRojCjA0w/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /game/wgawHog7Yc1xLdRojCjA0w/aim-shot HTTP/1.1" 200 OK
INFO:     127.0.0.1:47974 - "POST /game/wgawHog7Yc1xLdRojCjA0w/fire-shots HTTP/1.1" 200 OK
INFO:     127.0.0.1:39240 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:39244 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39260 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39272 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39286 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39294 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39296 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39308 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39324 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39334 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39350 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39354 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39356 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39362 - "POST /test/reset-lobby HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:39378 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39388 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39404 - "POST /test/reset-lobby HTTP/1.1" 200 OK
_________________ test_opponent_reconnects_after_disconnection _________________

fixturefunc = <function both_players_completed_ship_placement at 0x7fbaba78d940>
request = <FixtureRequest for <Function test_opponent_reconnects_after_disconnection>>
kwargs = {'browser': <Browser type=<BrowserType name=chromium executable_path=/home/david/.cache/ms-playwright/chromium-1187/chrome-linux/chrome> version=140.0.7339.16>, 'game_context': {}}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/bdd/test_gameplay_steps_browser.py:547: in both_players_completed_ship_placement
    player_page, opponent_page, game_id = setup_two_player_game_browser(browser)
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/bdd/test_gameplay_steps_browser.py:105: in setup_two_player_game_browser
    player_page.wait_for_selector(
.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py:8182: in wait_for_selector
    self._sync(
.venv/lib/python3.13/site-packages/playwright/_impl/_page.py:423: in wait_for_selector
    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:369: in wait_for_selector
    await self._channel.send(
.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:69: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x7fbab986f350>
cb = <function Channel.send.<locals>.<lambda> at 0x7fbab96e0900>
is_internal = False, title = None

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", None
        ) or inspect.stack(0)
    
        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 10000ms exceeded.
E           Call log:
E             - waiting for locator("[data-testid=\"select-opponent-Player2\"]") to be visible

.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:558: TimeoutError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:39410 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:39418 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39422 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39424 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39428 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39442 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:39442 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:39454 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39460 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39442 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:39442 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39442 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:39476 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:39476 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:39480 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39482 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39442 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:39476 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:39476 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39476 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:39488 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39494 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39476 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:39498 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39510 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39518 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39528 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39442 - "GET /lobby HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:39532 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39548 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39552 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39566 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39574 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39588 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39600 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39604 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39616 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39628 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39638 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39646 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39660 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39664 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39676 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39680 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39694 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39706 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39720 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39728 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39730 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39738 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39752 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39754 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39756 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39770 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39776 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39790 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39804 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39806 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39820 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39830 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39834 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:39846 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:37928 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:37940 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:37942 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:37952 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:37964 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:37966 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:37974 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:37988 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38004 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38008 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38020 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38024 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38032 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38048 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38052 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38056 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38062 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38074 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38078 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38088 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38098 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38104 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38116 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38124 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38136 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38140 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38150 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38164 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38178 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38180 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38194 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38210 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38224 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38240 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38254 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38260 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38274 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38278 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38284 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38288 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38296 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38302 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38310 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38316 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38318 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38320 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38324 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38328 - "POST /test/reset-lobby HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:38330 - "POST /test/reset-lobby HTTP/1.1" 200 OK
_______________________ test_player_surrenders_the_game ________________________

fixturefunc = <function both_players_completed_ship_placement at 0x7fbaba78d940>
request = <FixtureRequest for <Function test_player_surrenders_the_game>>
kwargs = {'browser': <Browser type=<BrowserType name=chromium executable_path=/home/david/.cache/ms-playwright/chromium-1187/chrome-linux/chrome> version=140.0.7339.16>, 'game_context': {}}

    def call_fixture_func(
        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if inspect.isgeneratorfunction(fixturefunc):
            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)
                             ^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/bdd/test_gameplay_steps_browser.py:547: in both_players_completed_ship_placement
    player_page, opponent_page, game_id = setup_two_player_game_browser(browser)
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/bdd/test_gameplay_steps_browser.py:154: in setup_two_player_game_browser
    ).click()
      ^^^^^^^
.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py:15543: in click
    self._sync(
.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py:160: in click
    return await self._frame.click(self._selector, strict=True, **params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:549: in click
    await self._channel.send("click", self._timeout, locals_to_params(locals()))
.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:69: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x7fbab9795f50>
cb = <function Channel.send.<locals>.<lambda> at 0x7fbab94cb100>
is_internal = False, title = None

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", None
        ) or inspect.stack(0)
    
        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Locator.click: Timeout 40000ms exceeded.
E           Call log:
E             - waiting for locator("label:has([data-testid=\"select-ship-battleship\"])")

.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:558: TimeoutError
---------------------------- Captured stdout setup -----------------------------
INFO:     127.0.0.1:38342 - "POST /test/reset-lobby HTTP/1.1" 200 OK
Lobby reset successful: {'status': 'lobby cleared'}
----------------------------- Captured stdout call -----------------------------
INFO:     127.0.0.1:38350 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:38350 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:38350 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:38350 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38350 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "GET /login HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "GET /static/css/main.css HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "POST /login HTTP/1.1" 204 No Content
INFO:     127.0.0.1:38350 - "GET /lobby/status/long-poll?version=1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:38372 - "GET /lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38372 - "GET /lobby/status/long-poll HTTP/1.1" 200 OK
INFO:     127.0.0.1:38380 - "POST /select-opponent HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38372 - "GET /lobby/status/long-poll?version=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "POST /accept-game-request HTTP/1.1" 204 No Content
INFO:     127.0.0.1:38366 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:38372 - "GET /lobby/status/long-poll?version=3 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:38372 - "GET /start-game HTTP/1.1" 200 OK
INFO:     127.0.0.1:38372 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:38372 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:38372 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "POST /start-game HTTP/1.1" 303 See Other
INFO:     127.0.0.1:38366 - "GET /place-ships HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "GET /place-ships/opponent-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:38386 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38396 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38372 - "POST /place-ship HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:38410 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38416 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51328 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51334 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:38366 - "POST /place-ship HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51346 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51348 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51354 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51356 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51368 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51384 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51388 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51390 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51392 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51400 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51410 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51420 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51422 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51430 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51434 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51438 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51446 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51454 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51470 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51478 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51484 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51496 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51512 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51516 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51530 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51532 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51534 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51540 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51544 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51556 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51560 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51576 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51582 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51586 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51592 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51604 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51608 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51614 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51626 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51632 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51640 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51642 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51644 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51656 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51666 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51674 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51690 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51692 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51700 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51714 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51722 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51732 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51748 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51760 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51768 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51774 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51788 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51804 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51816 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51826 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51828 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51838 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51844 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51860 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51868 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51884 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51892 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51906 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51918 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51928 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51932 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51948 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51962 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51972 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:51988 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52004 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52006 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52020 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52030 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52036 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52046 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52062 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52072 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52080 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52090 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52106 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52116 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52124 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52136 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52150 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52156 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52168 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52182 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52188 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52202 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52212 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52218 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52232 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52238 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52248 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52262 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52266 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52270 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52286 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52298 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52310 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52316 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52332 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52342 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52350 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52358 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52374 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52386 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52388 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52398 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52402 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52406 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52410 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52426 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52428 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52432 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52448 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52464 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52468 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52478 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52484 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52486 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52498 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52506 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52514 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52524 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52536 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52546 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52548 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52552 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52558 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52566 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52582 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52584 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52588 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52594 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52604 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52620 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52636 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52646 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52656 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52662 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52674 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52690 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52704 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52712 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52724 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52732 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52738 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52754 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52760 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52766 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52776 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52790 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52796 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52808 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52818 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52822 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52830 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52846 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52858 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52874 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52880 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52894 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52904 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52912 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52920 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52922 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52924 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52932 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52938 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52948 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52958 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52970 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52980 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:52994 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53006 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53022 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53028 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53040 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53050 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53062 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53072 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53080 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53082 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53084 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53086 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53092 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53098 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53100 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53106 - "POST /test/reset-lobby HTTP/1.1" 200 OK
INFO:     127.0.0.1:53122 - "POST /test/reset-lobby HTTP/1.1" 200 OK
--------------------------- Captured stdout teardown ---------------------------
INFO:     127.0.0.1:53566 - "POST /test/reset-lobby HTTP/1.1" 200 OK
--------------------------- Captured stderr teardown ---------------------------
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [2681323]
=========================== short test summary info ============================
FAILED tests/bdd/test_gameplay_steps_browser.py::test_handling_network_error_during_shot_submission
FAILED tests/bdd/test_gameplay_steps_browser.py::test_opponent_disconnects_during_game
FAILED tests/bdd/test_gameplay_steps_browser.py::test_opponent_reconnects_after_disconnection
FAILED tests/bdd/test_gameplay_steps_browser.py::test_player_surrenders_the_game
=================== 4 failed, 5 passed in 237.37s (0:03:57) ====================
