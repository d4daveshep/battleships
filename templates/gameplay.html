{% extends "base.html" %}

{% block title %}Gameplay - Battleships{% endblock %}

{% block content %}
<h1 data-testid="round-indicator">Round {{ round_number }}</h1>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Game Information</h2>
    </div>
    <div class="card-body">
        <p class="game-info-item"><strong>Player:</strong> {{ player_name }}</p>
        <p class="game-info-item"><strong>Opponent:</strong> {{ opponent_name }}</p>
        <p class="game-info-item"><strong>Game ID:</strong> {{ game_id }}</p>
        <div class="game-stats mt-3">
            <p class="game-stat-item" data-testid="ships-sunk"><strong>Ships Sunk:</strong> {{ ships_sunk_count }}/5</p>
            <p class="game-stat-item" data-testid="ships-lost"><strong>Ships Lost:</strong> {{ ships_lost_count }}/5</p>
        </div>
    </div>
</div>

{% if status_message %}
<div class="alert alert-info" data-testid="game-status">
    {{ status_message }}
</div>
{% endif %}

{# 
    Two-column board layout:
    - Left: Player's own ships and incoming shots
    - Right: Shots fired at opponent with integrated aiming interface
#}
<div class="grid grid-2">
    <!-- Player's Board (Own Ships) -->
    <div class="ship-board-container">
        <h3>My Ships</h3>
        <p>Your fleet and incoming shots</p>
        
        {% include "components/player_board.html" %}
    </div>

    <!-- Shots Fired Board (Interactive Aiming) -->
    <div class="ship-board-container">
        <h3>Shots Fired</h3>
        <p>Aim and fire at {{ opponent_name }}</p>
        
        {# 
            Aiming Interface - Loaded via HTMX on page load
            Contains: shot counter, interactive grid, aimed shots list, fire button
        #}
        <div id="aiming-interface"
             hx-get="/game/{{ game_id }}/aiming-interface"
             hx-trigger="load"
             hx-swap="innerHTML">
            <div class="loading-message" data-testid="aiming-loading">
                Loading aiming interface...
            </div>
        </div>
    </div>
</div>

<!-- Hits Made Area -->
{% include "components/hits_made_area.html" %}

<!-- Game Actions -->
<div class="game-actions">
        <h3>Other Actions</h3>
        <div class="btn-group">
            <button class="btn btn-warning" disabled>
                üè≥Ô∏è Surrender (Coming Soon)
            </button>
        </div>
    </div>


{% endblock %}
