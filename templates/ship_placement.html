{% extends "base.html" %}

{% block title %}Ship Placement - Battleships{% endblock %}

{% block content %}
<h1>Ship Placement</h1>
<p>Player: {{ player_name }}</p>
K it looks like the ship placement tests pass but I can't test from the browser since there's no form fields to post and submit the ship placement details with.  Can you create failing playwright tests in a file called tests/bdd/test_ship_placement_steps_browser to match the @tests/bdd/test_ship_placement_steps_fastapi.py .  I only expect the same ship placement browser tests to pass.

{% if placement_error %}
<div data-testid="placement-error" style="color: red; margin: 10px 0;">
    {{ placement_error }}
</div>
{% endif %}

<div data-testid="ship-placement-status">
    <p data-testid="ship-placement-count">{{ placed_ships|length }} of 5 ships placed</p>
</div>

<div data-testid="my-ships-board" style="border: 1px solid #ccc; padding: 10px; min-height: 100px;">
    <h3>My Ships and Shots Received</h3>
    
    {% if placed_ships %}
        {% for ship_name, ship_data in placed_ships.items() %}
        <div data-testid="placed-ship-{{ ship_name.lower() }}">
            <span data-testid="ship-status-{{ ship_name.lower() }}">{{ ship_name }} - Placed</span>
            <!-- Display cells occupied by the ship -->
            {% for cell in ship_data.cells %}
            <span data-testid="cell-{{ cell }}" data-ship="{{ ship_name.lower() }}">{{ cell }}</span>
            {% endfor %}
            <button type="button" data-testid="remove-ship-{{ ship_name.lower() }}">Remove</button>
        </div>
        {% endfor %}
    {% else %}
        <p>No ships placed yet.</p>
    {% endif %}
</div>

<h2>Ship Selection</h2>
<div>
    {% set ship_list = ["Carrier", "Battleship", "Cruiser", "Submarine", "Destroyer"] %}
    {% for ship in ship_list %}
    <button type="button" data-testid="select-ship-{{ ship.lower() }}" {% if ship in placed_ships %}disabled{% endif %}>
        {{ ship }} {% if ship in placed_ships %}(Placed){% endif %}
    </button>
    {% endfor %}
</div>

<h2>Place Ship</h2>
<form method="POST" action="/place-ship">
    <input type="hidden" name="player_name" value="{{ player_name }}">
    
    <div>
        <label for="ship_name">Ship Name:</label>
        <input type="text" id="ship_name" name="ship_name" required>
    </div>
    
    <div>
        <label for="start_coordinate">Start Coordinate:</label>
        <input type="text" id="start_coordinate" name="start_coordinate" required placeholder="e.g., A1">
    </div>
    
    <div>
        <label for="end_coordinate">End Coordinate:</label>
        <input type="text" id="end_coordinate" name="end_coordinate" required placeholder="e.g., A5">
    </div>
    
    <div>
        <label for="orientation">Orientation:</label>
        <select id="orientation" name="orientation" required>
            <option value="">Select orientation</option>
            <option value="horizontal">Horizontal</option>
            <option value="vertical">Vertical</option>
            <option value="diagonal">Diagonal</option>
        </select>
    </div>
    
    <button type="submit" data-testid="place-ship-button">Place Ship</button>
</form>

<h2>Actions</h2>
<form method="POST" action="/random-ship-placement" style="display: inline;">
    <input type="hidden" name="player_name" value="{{ player_name }}">
    <button type="submit" data-testid="random-placement-button">Random Placement</button>
</form>

<form method="POST" action="/reset-all-ships" style="display: inline;">
    <input type="hidden" name="player_name" value="{{ player_name }}">
    <button type="submit" data-testid="reset-all-ships-button">Reset All Ships</button>
</form>

<form method="POST" action="/start-game" style="display: inline;">
    <input type="hidden" name="player_name" value="{{ player_name }}">
    <button type="submit" data-testid="start-game-button" {% if placed_ships|length < 5 %}disabled{% endif %}>
        Start Game
    </button>
</form>

<form method="POST" action="/ready-for-game" style="display: inline;">
    <input type="hidden" name="player_name" value="{{ player_name }}">
    <button type="submit" data-testid="ready-button" {% if placed_ships|length < 5 %}disabled{% endif %}>
        Ready
    </button>
</form>

<div data-testid="status-message" style="margin-top: 20px;">
    {% if status_message %}
    {{ status_message }}
    {% endif %}
</div>
{% endblock %}
